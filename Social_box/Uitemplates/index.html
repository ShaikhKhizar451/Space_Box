<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>-->
<!--    <title>Title</title>-->
<!--</head>-->
<!--<body>-->
<!--<img src="https://drive.google.com/uc?id=1fkArDScCp50vb5YR0ijbXKyqIBjzt1cY&export=download">-->
<!--<video src="https://drive.google.com/uc?export=view&id=1KVt186vJDAzqb52JFiRulhzVyTbnXp8x" autoplay="autoplay" controls="controls"></video>-->

<!--<input type="file" id="fileUpload">-->

<!--<input type="file" id="i_file" value="">-->
<!--<input type="button" id="i_submit" value="Submit">-->
<!--<br>-->
<!--<img src="" width="200" style="display:none;" />-->
<!--<br>-->
<!--<div id="disp_tmp_path"></div>-->
<!--<script>-->
<!--$('#i_file').change( function(event) {-->
<!--    var tmppath = URL.createObjectURL(event.target.files[0]);-->
<!--    $("img").fadeIn("fast").attr('src',URL.createObjectURL(event.target.files[0]));-->

<!--    $("#disp_tmp_path").html("Temporary Path(Copy it and try pasting it in browser address bar) &ndash;&gt; <strong>["+tmppath+"]</strong>");-->
<!--});-->
<!--</script>-->

<!--<script type="text/javascript">-->
<!--function getFilePath(){-->
<!--     $('input[type=file]').change(function () {-->
<!--         var filePath=$('#fileUpload').val();-->
<!--         console.log(filePath)-->
<!--     });-->
<!--}-->
<!--getFilePath();-->
<!--</script>-->
<!--</body>-->
<!--</html>-->
<!--<html>-->
<!--<head>-->
<!--  <title>Page Title</title>-->
<!--  <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>-->
<!--  <script type="text/javascript">-->
<!--  $(function(){-->

<!--			$('#fiad').change( function(event) {-->
<!--													var tmppath = URL.createObjectURL(event.target.files[0]);-->
<!--													$("img").fadeIn("fast").attr('src',tmppath);-->
<!--													alert(tmppath);-->

<!--			});-->
<!--  });-->
<!--  </script>-->

<!--</head>-->
<!--<body>-->

<!--	<input type="file" id="fiad"><br><br>-->

<!--	<img src="" width="200" style="display:none;" />-->

<!--</body>-->
<!--</html>-->
<!--</br></br>-->


<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <title>Create File</title>
</head>

<body>
    <label>image/video</label> <input type="text" id="image_video"><br>
    <label>caption</label> <input type="text" id="caption"><br>
    <label>likes</label> <input type="text" id="likes"><br>
    <label>created on</label> <input type="date" id="created_on"><br>
     <input type="button" value="Submit" onclick="submitForm()">
    <input type="button" value="Send File" onclick="sendFile()">
</body>
<script>
    var tmppath;
    $(function () {
        $('#file').change(function (event) {
            // tmppath = $(this).val();
            tmppath = URL.createObjectURL(event.target.files[0]).slice(5);
            //alert(tmppath);
        });
    });
    $(document).ready(function () {
        var myDate = new Date();
        var pick = document.getElementById('created_on')
        pick.value = myDate
    });
    function submitForm() {
        var image_video = document.getElementById('image_video').value;
        var caption = document.getElementById('caption').value
        var created_on = document.getElementById('created_on').value
        console.log(image_video, caption, created_on)

        fetch("http://127.0.0.1:8000/create_post",
            {
                headers: {
                    'Accept': 'application/json',
                    'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJIYW5zQGdtYWlsLmNvbSIsImV4cCI6MTY3MTU2NjIyNX0.xZXP4FDUf-I9i35g-y7p_kxy8Sd6NYJdQRDueGMyn1M',
                    'Content-Type': 'multipart/form-data'
                },
                method: "POST",
                body: JSON.stringify({ 'image_video': image_video, 'caption': caption, 'likes': 0, 'created_on': created_on })
            })
            .then(function (res) { console.log(res) })
            .catch(function (res) { console.log(res) })
    }
    function sendFile() {
        var input = document.querySelector('input[type="file"]')

        var data = new FormData()
        data.append('file', input.files[0])
        data.append('filePath',input.value)
        console.log(data)
        console.log(input.value)

        fetch("http://127.0.0.1:8000/uploadImg",
            {
                headers: {
                    'Accept': 'application/json',
                    'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJIYW5zQGdtYWlsLmNvbSIsImV4cCI6MTY3MTU2NjIyNX0.xZXP4FDUf-I9i35g-y7p_kxy8Sd6NYJdQRDueGMyn1M',
                    'Content-Type': 'multipart/form-data'
                },
                method: "POST",
                body: data
            })
            .then(function (res) { console.log(res) })
            .catch(function (res) { console.log(res) })
    }
    window.onload = function () {
        var request = new XMLHttpRequest();
        request.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                console.log(this.responseText);
                jsonout = this.responseText;
            }
            else {
                console.log("Error");
            }
        };
        request.open('GET', 'http://127.0.0.1:8000/getUser', true);
        request.setRequestHeader('accept', 'application/json');
        request.setRequestHeader('Authorization', 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJIYW5zQGdtYWlsLmNvbSIsImV4cCI6MTY3MTU2NjIyNX0.xZXP4FDUf-I9i35g-y7p_kxy8Sd6NYJdQRDueGMyn1M');
        request.setRequestHeader("Content-type", "application/json");
        request.send();
    }
</script>

</html>


<!-- image_video='filepath333' caption='string' likes=0 created_on='string' <class 'Social_box.schemas.showPost'>




    print(file.filename, file.content_type.split('/')[1], dir(file))
    # print(await file.read())
    # f = open(os.path.realpath(os.curdir)+'/Social_box/temp/'+file.filename+'.'+(file.content_type.split('/')[1]), 'wb')
    # f.write(await file.read())
    # f.close()
    os.remove(os.path.realpath(os.curdir)+'/Social_box/temp/'+file.filename+'.'+(file.content_type.split('/')[1])) -->